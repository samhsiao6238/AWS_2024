# CIDR (Classless Inter-Domain Routing)

_CIDR (Classless Inter-Domain Routing) 是一種表示 IP 位址範圍的方式，主要應用於網路劃分與 IP 位址分配。在 AWS VPC 中，CIDR 是定義 VPC 和子網 IP 位址的核心工具，並且影響網路規劃、子網劃分及路由配置等操作。_

<br>

## CIDR 表示法

1. CIDR 格式通常為 `IP 位址/遮罩長度`，例如 `10.0.0.0/16`。這裡的 `/16` 表示前 16 位元用來表示網路位址，剩餘的位元則用來表示主機位址。

<br>

2. CIDR 提供了比傳統的類別型網路（Class A/B/C）更靈活的網路位址劃分方式。

<br>

## 網路位址 vs 主機位址

1. CIDR 中的遮罩長度（如 `/16` 或 `/24`）決定了多少位元用於網路位址，剩餘位元用於主機位址。

<br>

2. 遮罩長度越長，代表的網路越小，可分配的主機位址數量越少；遮罩長度越短，網路越大，可分配的設備數量越多。

<br>

## CIDR 範例

1. `10.0.0.0/16`：前 16 位是網路位址，主機位址範圍為 `10.0.0.0` 到 `10.0.255.255`。理論上可分配 65,536 個 IP 位址，但由於保留了 5 個 IP，實際上可用 65,531 個 IP 位址。

<br>

2. `10.0.0.0/24`：前 24 位是網路位址，主機位址範圍為 `10.0.0.0` 到 `10.0.0.255`。理論上可分配 256 個 IP 位址，實際上可用 251 個，因為 AWS 預留了 5 個 IP 位址供內部使用。

<br>

## 子網遮罩與網路劃分

_Subnet Mask_

<br>

1. CIDR 中的遮罩長度直接影響網路的大小和子網劃分。在 AWS VPC 中，VPC 的 IP 位址範圍由 CIDR 定義，並可以根據業務需求進行子網劃分。例如，`10.0.0.0/16` 的 VPC 可以劃分為多個更小的子網，如 `10.0.0.0/24` 或 `10.0.1.0/24`。

<br>

2. CIDR 遮罩越短，表示網路越大；遮罩越長，網路越小。這種靈活性使得在大型網路架構中，能夠合理劃分網路資源。

<br>

## CIDR 區塊規劃

1. 在建立 VPC 時，CIDR 的選擇至關重要。範圍過大會浪費 IP 資源，範圍過小則可能不足以容納未來擴展需求。例如，`/16` 可支持超過 65,000 個 IP，而 `/24` 只能支持 251 個設備。

<br>

2. 在設置多個 VPC 或跨 VPC 連線時，必須確保 CIDR 區段不重疊，以避免路由衝突。AWS 要求 VPC 之間的 IP 位址不可重疊，特別是在 VPC Peering 或 Transit Gateway 連線時。

<br>

___

_END_
