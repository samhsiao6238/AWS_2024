# IAM 簡介

## Task 01

1. 搜尋並進入 IAM。
2. 在 IAM 主控台中，點擊左側 `Users`，內有三個 User。。
3. 點擊 `user-1`，觀察 `Permissions` 頁籤，可知沒有任何 permission。
4. 點擊 `Groups`，user-1 也不隸屬任何 group。
5. 點擊 `Security credentials`，user-1 有一組 `Console password`。

6. 在左側選擇 `User groups`。以下組已建立 `EC2-Admin`、`EC2-Support`、`S3-Support`；選擇 `EC2-Support` 的鏈接。


7. 選擇 `Permissions` 選項卡。該組有一個與之關聯的管理策略，稱為 AmazonEC2ReadOnlyAccess。管理策略是由 AWS 或您的管理員構建的預構建策略，可以附加到 IAM 用戶和組上。當策略被更新時，該策略的更改會立即應用於所有附加該策略的用戶和組。

選擇 AmazonEC2ReadOnlyAccess 策略旁邊的加號（+）圖標以查看策略詳細信息。

注意：策略定義了對特定 AWS 資源允許或拒絕的操作。

該策略授予列出和描述有關 EC2、彈性負載均衡、CloudWatch 和自動縮放的信息的許可權。這種查看資源但不修改資源的能力非常適合分配給支持角色。

IAM 策略中聲明的基本結構是：

- Effect 說明是否允許或拒絕權限。
- Action 指定可以針對 AWS 服務（例如 cloudwatch:ListMetrics）進行的 API 調用。
- Resource 定義了策略規則所涵蓋的實體範圍（例如特定的 Amazon S3 存儲桶或 Amazon EC2 實例，或 * 表示任何資源）。

選擇減號（-）圖標以隱藏策略詳細信息。

在左側的導航窗格中，選擇用戶組。

選擇 S3-Support 組的鏈接，然後選擇“權限”選項卡。

S3-Support 組附加了 AmazonS3ReadOnlyAccess 策略。

選擇加號（+）圖標以查看策略詳細信息。

該策略授予對 Amazon S3 中的資源進行獲取和列出的許可權。

選擇減號（-）圖標以隱藏策略詳細信息。

在左側的導航窗格中，選擇用戶組。

選擇 EC2-Admin 組的鏈接，然後選擇“權限”選項卡。

該組與其他兩個組略有不同。它沒有管理策略，而是具有內聯策略，這是一個僅分配給一個用戶或組的策略。內聯策略通常用於為一次性情況應用許可權。

選擇加號（+）圖標以查看策略詳細信息。

該策略授予查看（描述）有關 Amazon EC2 的信息的許可權，並且還有啟動和停止實例的能力。

選擇減號（-）圖標以隱藏策略詳細信息。

商業場景
在此實驗的其餘部分中，您將與這些用戶和組一起工作，以啟用支持以下商業場景的許可權：

您的公司正在擴大對 Amazon Web Services 的使用，並且正在使用許多 Amazon EC2 實例和大量 Amazon S3 存儲。您希望根據工作職能授予新員工訪問權限：

| 用戶   | 組            | 許可權                            |
|--------|---------------|----------------------------------|
| user-1 | S3-Support    | 對 Amazon S3 的只讀訪問         |
| user-2 | EC2-Support   | 對 Amazon EC2 的只讀訪問        |
| user-3 | EC2-Admin     | 查看、啟動和停止 Amazon EC2 實例 |

任務 2：將用戶添加到組
您最近已經雇用了 user-1，該用戶將提供 Amazon S3 的支持。您將把他們添加到 S3-Support 組，以便他們通過附加的 AmazonS3ReadOnlyAccess 策略繼承必要的許可權。

您可以忽略在此任務中出現的任何“未授權”錯誤。這是由於您的實驗帳戶具有有限的許可權，並且不會影響您完成實驗的能力。

將 user-1 添加到 S3-Support 組
在左側導航窗格中，選擇用戶組。

選擇 S3-Support 組的鏈接。

選擇用戶選項卡。

在用戶選項卡中，選擇添加用戶。

在“將用戶添加到 S3-Support”窗口中，配置以下內容：

選擇 user-1。

在屏幕底部，選擇添加用戶。

在用戶選項卡中，您將看到 user-1 已被添加到該組。

將 user-2 添加到 EC2-Support 組
您已經雇用 user-2，該用戶將提供 Amazon EC2 的支持。

使用與上述相似的步驟，將 user-2 添加到 EC2-Support 組。

user-2 現在應該是 EC2-Support 組的一部分。

將 user-3 添加到 EC2-Admin 組
您已經雇用 user-3 作為 Amazon EC2 管理員，負責管理您的 EC2 實例。

使用與上述相似的步驟，將 user-3 添加到 EC2-Admin 組。

user-3 現在應該是 EC2-Admin 組的一部分。

在左側的導航窗格中，選擇用戶組。

每個組現在應該在用戶列中顯示 1，表示每個組中的用戶數量。

如果您沒有在每個組旁邊看到 1，請返回上述指示以確保每個用戶都被分配到用戶組，如商業場景部分的表格所示。

任務 3：登錄並測試用戶
在此任務中，您將測試每個 IAM 用戶的許可權。

在左側的導航窗格中，選擇儀表板。

在右側顯示的 IAM 用戶的登錄 URL 連結。它的樣子類似於：https://123456789012.signin.aws.amazon.com/console

此鏈接可用於登錄到您當前使用的 AWS 帳戶。

將 IAM 用戶的登錄 URL 複製到文本編輯器中。

打開一個私人（隱身）窗口。

Mozilla Firefox

選擇屏幕右上角的菜單欄

選擇“新建私人窗口”

Google Chrome

選擇屏幕右上角的三個點

選擇“新建隱身窗口”

Microsoft Edge

選擇屏幕右上角的三個點

選擇“新建 InPrivate 窗口”

Microsoft Internet Explorer

選擇工具菜單選項

選擇“隱私瀏覽”

將 IAM 用戶登錄鏈接粘貼到私人瀏覽器會話的地址欄中，然後按 Enter。

接下來，您將以 user-1 的身份登錄，他已被聘用為您的 Amazon S3 存儲支持人員。

登錄使用：

- IAM 用戶名：user-1
- 密碼：Lab-Password1

在“服務”右側的搜索框中，搜索並選擇 S3 以打開 S3 控制台。

選擇帳戶中存在的存儲桶名稱並瀏覽內容。

由於您的用戶是 IAM 中 S3-Support 組的一部分，因此他們有權查看 Amazon S3 存儲桶及其內容的列表。

注意：該存儲桶不包含任何對象。

現在，測試他們是否可以訪問 Amazon EC2。

在“服務”右側的搜索框中，搜索並選擇 EC2 以打開 EC2 控制台。

在左側導航窗格中，選擇實例。

您無法看到任何實例。相反，您看到一條消息，指出“您未獲授權執行此操作”。這是因為該用戶未被授予訪問 Amazon EC2 的任何許可權。

您現在將以 user-2 的身份登錄，他被聘用為您的 Amazon EC2 支持人員。

登出 AWS 管理控制台的 user-1，完成以下操作：

在屏幕頂部，選擇 user-1

選擇登出

將 IAM 用戶登錄鏈接粘貼到您的私人瀏覽器標籤的地址欄中，然後按 Enter。

注意：此鏈接應在您的文本編輯器中。

登錄使用：

- IAM 用戶名：user-2
- 密碼：Lab-Password2

在“服務”右側的

搜索框中，搜索並選擇 EC2 以打開 EC2 控制台。

在左側導航窗格中，選擇實例。

您現在能夠看到 Amazon EC2 實例，因為您擁有只讀許可權。然而，您將無法對 Amazon EC2 資源進行任何更改。

如果您看不到 Amazon EC2 實例，則可能是您的區域不正確。在屏幕右上角，從下拉區域菜單中選擇您在實驗開始時注意的區域（例如，N. Virginia）。

選擇名為 LabHost 的實例。

在實例狀態菜單上，選擇停止實例。

在停止實例窗口中，選擇停止。

您將收到一條錯誤消息，指出“您未獲授權執行此操作”。這表明該策略僅允許您查看信息，而不進行更改。

選擇 X 以關閉“無法停止實例”消息。

接下來，檢查 user-2 是否可以訪問 Amazon S3。

在“服務”右側的搜索框中，搜索並選擇 S3 以打開 S3 控制台。

您將看到消息“您沒有權限列出存儲桶”，因為 user-2 沒有訪問 Amazon S3 的許可權。

您現在將以 user-3 的身份登錄，他已被聘用為您的 Amazon EC2 管理員。

登出 AWS 管理控制台的 user-2，完成以下操作：

在屏幕頂部，選擇 user-2

選擇登出

將 IAM 用戶登錄鏈接粘貼到您的私人窗口中並按 Enter。

將登錄鏈接粘貼到您的私人瀏覽器標籤的地址欄中並按 Enter。如果它不在剪貼板中，請從您之前存儲的文本編輯器中檢索它。

登錄使用：

- IAM 用戶名：user-3
- 密碼：Lab-Password3

在“服務”右側的搜索框中，搜索並選擇 EC2 以打開 EC2 控制台。

在左側導航窗格中，選擇實例。

作為 EC2 管理員，您現在應該有權限停止 Amazon EC2 實例。

選擇名為 LabHost 的實例。

如果您看不到 Amazon EC2 實例，則可能是您的區域不正確。在屏幕右上角，從下拉區域菜單中選擇您在實驗開始時注意的區域（例如，N. Virginia）。

在實例狀態菜單中，選擇停止實例。

在停止實例窗口中，選擇停止。

實例將進入停止狀態並關閉。

關閉您的私人瀏覽器窗口。

--- 

如有需要進一步調整或翻譯的內容，請隨時告訴我！