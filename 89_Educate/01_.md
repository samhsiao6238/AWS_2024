# Cancer Hunters Lab

![](images/img_01.png)

## 操作步驟

_在此 [Lab](https://awseducate.instructure.com/courses/990/modules) 中會使用 Amazon Athena 和 SQL 來分析癌症數據，目標是協助四位癌症研究者及醫生解決與癌症基因突變相關的問題，後續會有幾個 `Data Scientist Scenarios`。_

## 目標

1. 使用 Athena SQL 探索多個癌症細胞數據集。

2. 找出癌症細胞突變的類型。

3. 分析 DNA 序列中的錯誤。

4. 根據臨床 DNA 突變數據討論針對癌症的治療方法。

## 開啟 Amazon Athena

1. 在控制台搜索 `Athena`。

![](images/img_02.png)

2. 點擊 `Launch query editor` 啟動查詢編輯器。

![](images/img_03.png)

3. 在畫面右側 `Workgroup` 選單中選擇 `cancer-hunters` 工作群組。

![](images/img_04.png)

4. 並在彈出的對話框中選擇 `Acknowledge`。

![](images/img_05.png)

## Scenario 1: Dr. Wei 和 TP53 突變

_問題：Dr. Wei 想知道其腫瘤診所中女性癌症患者的分佈，並查找是否有 TP53 突變的樣本。_

1. 切換頁籤到 `Saved queries`，打開已保存的查詢。

![](images/img_06.png)

2. 從列表中找到名稱為 `1 - All female samples` 的查詢，點擊 ID 列中的鏈接。

![](images/img_07.png)

3. 其中已經預設了查詢語法。

```sql
SELECT * FROM samples WHERE sex = 'female'
```

4. 選擇 `Run`，查看女性患者的樣本結果。

![](images/img_08.png)

5. 依據教程指示，要 `記下以下問題的答案：癌症樣本來自哪些部位？例如，腎臟、骨髓、肺或胰腺`，在這裡我選擇 `下載結果`。

![](images/img_09.png)

6. 再次切換頁籤到 `Saved queries`，選擇名稱為 `2 - Female TP53 samples` 的查詢，並運行 `Run`。

![](images/img_10.png)

7. 根據結果，寫下 TP53 突變 導致的女性癌症類型。

![](images/img_11.png)

8. 這部分的結論是通過數據查詢，確定女性患者的癌症分佈與 TP53 突變相關的癌症類型，幫助 Dr. Wei 進行進一步的癌症研究與診斷。

## Scenario 2: Dr. Salazar 和 BRAF 突變

_問題：Dr. Salazar 想知道 BRAF 突變是否與數據中的癌症相關，並尋求對三位病人的治療建議。_

1. 選擇 `Saved queries`，找到名稱為 `3 - VCF and samples joined` 的查詢並打開

![](images/img_12.png)

2. 在最後面添加條件。

   ```sql
   WHERE name = 'BRAF'
   ```

   ![](images/img_13.png)

3. 運行查詢，記下以下問題的答案：數據集中有哪些癌症類型與 BRAF 突變相關？

![](images/img_14.png)

4. 使用圈選方式，輸入以下語法後，先圈選再查詢。

   ```sql
   select * from treatments where location = 'skin'
   ```

5. 也可以點擊 `+` 號創建一個新查詢，同樣輸入前面的 SQL 查詢，便可查找皮膚癌的治療方案。

   ![](images/img_15.png)

6. 結果顯示。

![](images/img_16.png)

7. 以上兩個結果，第一個結果顯示不同病人的樣本來源、癌症位置和突變類型，第二個結果顯示病人對應的治療選項；根據這些結果，可以給三位病人（F、S 和 U）提出具體的治療建議。

8. 數據顯示 Patient F 患有晚期黑色素瘤，並且 BRAF 突變與黑色素瘤有關。數據顯示，F 需要 激進的治療（aggressive），可使用的治療選項為 surgical removal and observation（晚期黑色素瘤）。

9. 數據顯示 Patient S 患有第三期皮膚癌（非黑色素瘤），並且數據中治療選項顯示為 conservative（保守治療）。這表示意病患可能需要較不激進的治療方法，如 radiation 和 surgical removal and observation。

10. 數據顯示 Patient U 的情況是第二期皮膚癌（非黑色素瘤），同樣顯示保守治療。U 的治療方案可選擇 surgical removal and observation。

## 針對 `Patient F` 說明



#### Scenario 3: Dr. Santos 的腎癌研究

問題：Dr. Santos 想知道腎癌患者的非註釋型替換突變，並尋求治療方案。

1. 選擇 Saved queries，找到名稱為 4 - All kidney samples 的查詢並運行。

2. 再次選擇 Saved queries，選擇名稱為 5 - Calculate kidney VCF 的查詢，並添加以下條件：
   ```sql
   WHERE location = 'kidney' AND type_2 = 'substitution'
   ```

3. 再次運行，並添加條件排除已註釋的樣本：
   ```sql
   AND annotated = 'no'
   ```

4. 根據結果，記下哪些患者（sample_source）有腎癌且存在非註釋型替換突變。

5. 創建新查詢，輸入以下 SQL 查詢以查找腎癌的治療方案：
   ```sql
   select * from treatments where location = 'kidney'
   ```

6. 根據結果，為 Patient J 和 Patient P 提供治療建議：
   - Patient J 需要保守治療（早期第二期）。
   - Patient P 需要更激進的治療（第四期）。

---

#### Scenario 4: Dr. Owusu 和肺癌患者

問題：Dr. Owusu 想了解其肺癌患者的性別比例以及哪些患者有 KRAS 突變。

1. 創建新查詢，輸入以下 SQL 查詢以查找所有肺癌樣本：
   ```sql
   select * from samples where location = 'lung'
   ```

2. 運行查詢，寫下肺癌患者的性別比例（男對女）。

3. 再次選擇 Saved queries，選擇 3 - VCF and samples joined 的查詢，並修改條件：
   ```sql
   WHERE name = 'KRAS' and location = 'lung'
   ```

4. 運行查詢，寫下有哪些肺癌患者有 KRAS 突變。

---

### 完成實驗室

1. 點擊頁面頂部的 End Lab 按鈕並確認結束實驗。
2. 結束後會短暫顯示 Ended AWS Lab Successfully 的訊息。

你已成功完成此實驗室，並協助了多位研究者與醫生進行癌症數據的分析與診斷。

---

這就是整個 Cancer Hunters Lab 的操作步驟。希望這份指引能幫助你順利完成實驗！